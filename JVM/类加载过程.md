### 类加载过程

![](类加载过程.assets/ttt.jpg)





- 初始化阶段就是执行类构造器方法clinit（）的过程。
- 此方法不需要定义，是javac编译器自动收集类中的所有类变量的赋值动作和静态代码块中的语句合并而来。 `我们注意到如果没有静态变量c，那么字节码文件中就不会有clinit方法`

<clinit> 需要静态代码块或者静态变量。

ctrl+SHIFT+T 搜索各种类



查看类之间继承关系：idea下快捷键F4或者右键diagram

变量名后面跟.vaR 直接获取赋值方法



**反向委托。具体实现由ContextClassLoader获取具体类实现**

![](类加载过程.assets/抽象类或者说接口由bootstrap加载具体上下文由系统类加载器.jpg)



## 沙箱安全机制

自定义String类，但是在加载自定义String类的时候会率先使用引导类加载器加载，而引导类加载器在加载过程中会先加载jdk自带的文件（rt.jar包中的java\lang\String.class）,报错信息说没有main方法就是因为加载的是rt.jar包中的String类。这样可以保证对java核心源代码的保护，这就是**沙箱安全机制**.





## 在jvm中表示两个class对象是否为同一个类存在的两个必要条件

- 类的完整类名必须一致，包括包名
- 加载这个类的ClassLoader（指ClassLoader实例对象）必须相同

换句话说，在jvm中，即使这两个类对象（class对象）来源同一个Class文件，被同一个虚拟机所加载，但只要加载它们的ClassLoader实例对象不同，那么这两个类对象也是不相等的.


